<% include Rails.application.routes.url_helpers %>
<% include External::ApplicationHelper %>

class IDPath {
  constructor(path) {
    this.path = path;
  }

  withID(id) {
    return this.path.replace('ID', id);
  }

  toString() {
    return this.withID('');
  }

  id(id) {
    return this.withID(id);
  }

  resource(id, resource) {
    return `${this.id(id)}/${resource}`;
  }
}

let idPath = function(path){
  return new IDPath(path);
};

// Misc

export const LoginStages = Object.freeze(<%= login_stages.to_json %>);
export const StoragePrefix = '<%= Rails.application.class.parent_name %>::vcfinder';

// Hashes

export const TargetInvestorStages = Object.freeze(<%= TargetInvestor::STAGES.to_json %>);
export const TargetInvestorStagesInverse = Object.freeze(<%= TargetInvestor::STAGES.invert.to_json %>);
export const TargetInvestorStageKeys = Object.freeze(<%= TargetInvestor::STAGES.keys.to_json %>);

export const CompetitorIndustries = Object.freeze(<%= Competitor::INDUSTRIES.to_json %>);
export const CompetitorIndustriesInverse = Object.freeze(<%= Competitor::INDUSTRIES.invert.to_json %>);

export const CompetitorFundTypes = Object.freeze(<%= Competitor::FUND_TYPES.to_json %>);
export const CompetitorFundTypesInverse = Object.freeze(<%= Competitor::FUND_TYPES.invert.to_json %>);


// Options

export const CompetitorIndustriesOptions = Object.freeze(<%= hash_to_options(Competitor::INDUSTRIES).to_json %>);

// Paths

export const InvestorsFuzzySearchPath = '<%= fuzzy_search_external_api_v1_investors_path(q: 'QUERY') %>';
export const InvestorsSearchPath = '<%= search_external_api_v1_investors_path %>';
export const InvestorsFilterPath = '<%= filter_external_api_v1_investors_path %>';
export const InvestorsRecommendationsPath = '<%= recommendations_external_api_v1_investors_path %>';
export const InvestorsLocationsPath = '<%= locations_external_api_v1_investors_path %>';
export const InvestorsPath = idPath('<%= external_api_v1_investor_path(id: 'ID ') %>');
export const TargetInvestorsPath = idPath('<%= external_api_v1_target_investor_path(id: 'ID') %>');
export const TargetInvestorsImportPath = '<%= import_external_api_v1_target_investors_path %>';
export const LoginPath = '<%= omniauth_path('google_external') %>';
export const FounderPath = '<%= external_api_v1_founder_path %>';
export const VCFinderPath = '<%= external_vcfinder_root_path %>';

// Admin

export const INVESTOR = 'investor';
