import React from 'react'
import classNames from 'classnames'

export default class Investor extends React.Component {
  changeStage(newStage) {
    return () => this.props.onStageChange(this.props.target.id, newStage);
  }

  hollowButton(colour, text, newStage) {
    return (
      <span className="hollowButton">
      <button
        type="button"
        className={classNames('hollow', colour, 'button')}
        onClick={this.changeStage(newStage)}
      >
        {text}
       </button>
    </span>
    );
  }
  renderButtons() {
    switch (this.props.target.stage) {
      case 'added':
        return (
          <div>
            {this.hollowButton('success', 'I heard back', 'waiting')}
            {this.hollowButton('warning', 'I need an intro!', 'intro')}
          </div>
        );
        break;
      case 'intro':
        return (
          <div>
            {this.hollowButton('success', 'I got an intro!', 'waiting')}
          </div>
        );
        break;
      case 'waiting':
        return (
          <div>
            {this.hollowButton('primary', 'I heard back', 'respond')}
            {this.hollowButton('success', "They're interested!", 'interested')}
            {this.hollowButton('alert', "They're not interested", 'pass')}
          </div>
        );
        break;
      case 'respond':
        return (
          <div>
            {this.hollowButton('primary', 'I responded', 'waiting')}
            {this.hollowButton('success', "They're interested!", 'interested')}
            {this.hollowButton('alert', "They're not interested", 'pass')}
          </div>
        );
        break;
      case 'interested':
        return (
          <div>
            {this.hollowButton('alert', "They're not interested anymore", 'pass')}
          </div>
        );
        break;
    }
  }

  render() {
    let investor = this.props.target.investor;
    return (
      <div className="card float-center investor">
        <div className="card-divider">
          <strong>{investor.first_name} {investor.last_name}</strong>
          &nbsp;
          <em>({investor.role}{investor.role ? ', ' : ''}{investor.competitor.name})</em>
        </div>
        <div className="card-section">
          {this.renderButtons()}
        </div>
      </div>
    );
  }
}